/*!
@file spearwolf-js - various javascript helpers and classes for various three.js/webgl experiments!
@author Wolfger Schramm <wolfger@spearwolf.de>
@version 0.0.1

Copyright 2016-2019 Wolfger Schramm

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

*/
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t=t||self).spearwolf={})}(this,function(t){"use strict";var n=function(t){try{return!!t()}catch(t){return!0}},e=!n(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),r=function(t){return"object"==typeof t?null!==t:"function"==typeof t},i=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t};function o(t,n){return t(n={exports:{}},n.exports),n.exports}var u=o(function(t){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)}),c=u.document,a=r(c)&&r(c.createElement),s=function(t){return a?c.createElement(t):{}},l=!e&&!n(function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}),f=function(t,n){if(!r(t))return t;var e,i;if(n&&"function"==typeof(e=t.toString)&&!r(i=e.call(t)))return i;if("function"==typeof(e=t.valueOf)&&!r(i=e.call(t)))return i;if(!n&&"function"==typeof(e=t.toString)&&!r(i=e.call(t)))return i;throw TypeError("Can't convert object to primitive value")},h=Object.defineProperty,p={f:e?Object.defineProperty:function(t,n,e){if(i(t),n=f(n,!0),i(e),l)try{return h(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},g=function(){var t=i(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n};e&&"g"!=/./g.flags&&p.f(RegExp.prototype,"flags",{configurable:!0,get:g});var v=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}},y=e?function(t,n,e){return p.f(t,n,v(1,e))}:function(t,n,e){return t[n]=e,t},d={}.hasOwnProperty,b=function(t,n){return d.call(t,n)},m=0,x=Math.random(),S=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++m+x).toString(36))},w=o(function(t){var n=t.exports={version:"2.6.2"};"number"==typeof __e&&(__e=n)}),O=(w.version,o(function(t){var n=S("src"),e=Function.toString,r=(""+e).split("toString");w.inspectSource=function(t){return e.call(t)},(t.exports=function(t,e,i,o){var c="function"==typeof i;c&&(b(i,"name")||y(i,"name",e)),t[e]!==i&&(c&&(b(i,n)||y(i,n,t[e]?""+t[e]:r.join(String(e)))),t===u?t[e]=i:o?t[e]?t[e]=i:y(t,e,i):(delete t[e],y(t,e,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[n]||e.call(this)})})),_=/./.toString,k=function(t){O(RegExp.prototype,"toString",t,!0)};n(function(){return"/a/b"!=_.call({source:"a",flags:"b"})})?k(function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!e&&t instanceof RegExp?g.call(t):void 0)}):"toString"!=_.name&&k(function(){return _.call(this)});var E=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},j=function(t){return Object(E(t))},I=Math.ceil,M=Math.floor,P=function(t){return isNaN(t=+t)?0:(t>0?M:I)(t)},T=Math.min,L=function(t){return t>0?T(P(t),9007199254740991):0},R=function(t){return function(n,e){var r,i,o=String(E(n)),u=P(e),c=o.length;return u<0||u>=c?t?"":void 0:(r=o.charCodeAt(u))<55296||r>56319||u+1===c||(i=o.charCodeAt(u+1))<56320||i>57343?t?o.charAt(u):r:t?o.slice(u,u+2):i-56320+(r-55296<<10)+65536}}(!0),A=function(t,n,e){return n+(e?R(t,n).length:1)},C={}.toString,F=function(t){return C.call(t).slice(8,-1)},N=o(function(t){var n=u["__core-js_shared__"]||(u["__core-js_shared__"]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:w.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),W=o(function(t){var n=N("wks"),e=u.Symbol,r="function"==typeof e;(t.exports=function(t){return n[t]||(n[t]=r&&e[t]||(r?e:S)("Symbol."+t))}).store=n}),$=W("toStringTag"),D="Arguments"==F(function(){return arguments}()),G=RegExp.prototype.exec,B=function(t,n){var e,r,i,o,u=t.exec;if("function"==typeof u){var c=u.call(t,n);if("object"!=typeof c)throw new TypeError("RegExp exec method returned something other than an Object or null");return c}if("RegExp"!==(void 0===(e=t)?"Undefined":null===e?"Null":"string"==typeof(i=function(t,n){try{return t[n]}catch(t){}}(r=Object(e),$))?i:D?F(r):"Object"==(o=F(r))&&"function"==typeof r.callee?"Arguments":o))throw new TypeError("RegExp#exec called on incompatible receiver");return G.call(t,n)},V=RegExp.prototype.exec,H=String.prototype.replace,U=V,z=function(){var t=/a/,n=/b*/g;return V.call(t,"a"),V.call(n,"a"),0!==t.lastIndex||0!==n.lastIndex}(),q=void 0!==/()??/.exec("")[1];(z||q)&&(U=function(t){var n,e,r,i,o=this;return q&&(e=new RegExp("^"+o.source+"$(?!\\s)",g.call(o))),z&&(n=o.lastIndex),r=V.call(o,t),z&&r&&(o.lastIndex=o.global?r.index+r[0].length:n),q&&r&&r.length>1&&H.call(r[0],e,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r});var X=U,Y=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},J=function(t,n,e){if(Y(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,i){return t.call(n,e,r,i)}}return function(){return t.apply(n,arguments)}},K=function(t,n,e){var r,i,o,c,a=t&K.F,s=t&K.G,l=t&K.S,f=t&K.P,h=t&K.B,p=s?u:l?u[n]||(u[n]={}):(u[n]||{}).prototype,g=s?w:w[n]||(w[n]={}),v=g.prototype||(g.prototype={});for(r in s&&(e=n),e)o=((i=!a&&p&&void 0!==p[r])?p:e)[r],c=h&&i?J(o,u):f&&"function"==typeof o?J(Function.call,o):o,p&&O(p,r,o,t&K.U),g[r]!=o&&y(g,r,c),f&&v[r]!=o&&(v[r]=o)};u.core=w,K.F=1,K.G=2,K.S=4,K.P=8,K.B=16,K.W=32,K.U=64,K.R=128;var Q=K;Q({target:"RegExp",proto:!0,forced:X!==/./.exec},{exec:X});var Z=W("species"),tt=!n(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),nt=function(){var t=/(?:)/,n=t.exec;t.exec=function(){return n.apply(this,arguments)};var e="ab".split(t);return 2===e.length&&"a"===e[0]&&"b"===e[1]}(),et=function(t,e,r){var i=W(t),o=!n(function(){var n={};return n[i]=function(){return 7},7!=""[t](n)}),u=o?!n(function(){var n=!1,e=/a/;return e.exec=function(){return n=!0,null},"split"===t&&(e.constructor={},e.constructor[Z]=function(){return e}),e[i](""),!n}):void 0;if(!o||!u||"replace"===t&&!tt||"split"===t&&!nt){var c=/./[i],a=r(E,i,""[t],function(t,n,e,r,i){return n.exec===X?o&&!i?{done:!0,value:c.call(n,e,r)}:{done:!0,value:t.call(e,n,r)}:{done:!1}}),s=a[0],l=a[1];O(String.prototype,t,s),y(RegExp.prototype,i,2==e?function(t,n){return l.call(t,this,n)}:function(t){return l.call(t,this)})}},rt=Math.max,it=Math.min,ot=Math.floor,ut=/\$([$&`']|\d\d?|<[^>]*>)/g,ct=/\$([$&`']|\d\d?)/g;et("replace",2,function(t,n,e,r){return[function(r,i){var o=t(this),u=null==r?void 0:r[n];return void 0!==u?u.call(r,o,i):e.call(String(o),r,i)},function(t,n){var u=r(e,t,this,n);if(u.done)return u.value;var c=i(t),a=String(this),s="function"==typeof n;s||(n=String(n));var l=c.global;if(l){var f=c.unicode;c.lastIndex=0}for(var h=[];;){var p=B(c,a);if(null===p)break;if(h.push(p),!l)break;""===String(p[0])&&(c.lastIndex=A(a,L(c.lastIndex),f))}for(var g,v="",y=0,d=0;d<h.length;d++){p=h[d];for(var b=String(p[0]),m=rt(it(P(p.index),a.length),0),x=[],S=1;S<p.length;S++)x.push(void 0===(g=p[S])?g:String(g));var w=p.groups;if(s){var O=[b].concat(x,m,a);void 0!==w&&O.push(w);var _=String(n.apply(void 0,O))}else _=o(b,a,m,x,w,n);m>=y&&(v+=a.slice(y,m)+_,y=m+b.length)}return v+a.slice(y)}];function o(t,n,r,i,o,u){var c=r+t.length,a=i.length,s=ct;return void 0!==o&&(o=j(o),s=ut),e.call(u,s,function(e,u){var s;switch(u.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,r);case"'":return n.slice(c);case"<":s=o[u.slice(1,-1)];break;default:var l=+u;if(0===l)return e;if(l>a){var f=ot(l/10);return 0===f?e:f<=a?void 0===i[f-1]?u.charAt(1):i[f-1]+u.charAt(1):e}s=i[l-1]}return void 0===s?"":s})}});var at=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(t){return(t^16*Math.random()>>t/4).toString(16)})},st=W("match"),lt=function(t){var n;return r(t)&&(void 0!==(n=t[st])?!!n:"RegExp"==F(t))},ft=W("species"),ht=Math.min,pt=[].push,gt=!!function(){try{return new RegExp("x","y")}catch(t){}}();et("split",2,function(t,n,e,r){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(this);if(void 0===t&&0===n)return[];if(!lt(t))return e.call(r,t,n);for(var i,o,u,c=[],a=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),s=0,l=void 0===n?4294967295:n>>>0,f=new RegExp(t.source,a+"g");(i=X.call(f,r))&&!((o=f.lastIndex)>s&&(c.push(r.slice(s,i.index)),i.length>1&&i.index<r.length&&pt.apply(c,i.slice(1)),u=i[0].length,s=o,c.length>=l));)f.lastIndex===i.index&&f.lastIndex++;return s===r.length?!u&&f.test("")||c.push(""):c.push(r.slice(s)),c.length>l?c.slice(0,l):c}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,r){var i=t(this),u=null==e?void 0:e[n];return void 0!==u?u.call(e,i,r):o.call(String(i),e,r)},function(t,n){var u=r(o,t,this,n,o!==e);if(u.done)return u.value;var c=i(t),a=String(this),s=function(t,n){var e,r=i(t).constructor;return void 0===r||null==(e=i(r)[ft])?n:Y(e)}(c,RegExp),l=c.unicode,f=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(gt?"y":"g"),h=new s(gt?c:"^(?:"+c.source+")",f),p=void 0===n?4294967295:n>>>0;if(0===p)return[];if(0===a.length)return null===B(h,a)?[a]:[];for(var g=0,v=0,y=[];v<a.length;){h.lastIndex=gt?v:0;var d,b=B(h,gt?a:a.slice(v));if(null===b||(d=ht(L(h.lastIndex+(gt?0:v)),a.length))===g)v=A(a,v,l);else{if(y.push(a.slice(g,v)),y.length===p)return y;for(var m=1;m<=b.length-1;m++)if(y.push(b[m]),y.length===p)return y;v=g=d}}return y.push(a.slice(g)),y}]});var vt,yt,dt={f:{}.propertyIsEnumerable},bt=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==F(t)?t.split(""):Object(t)},mt=function(t){return bt(E(t))},xt=Object.getOwnPropertyDescriptor,St={f:e?xt:function(t,n){if(t=mt(t),n=f(n,!0),l)try{return xt(t,n)}catch(t){}if(b(t,n))return v(!dt.f.call(t,n),t[n])}},wt=function(t,n){if(i(t),!r(n)&&null!==n)throw TypeError(n+": can't set as prototype!")},Ot={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,e){try{(e=J(Function.call,St.f(Object.prototype,"__proto__").set,2))(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,r){return wt(t,r),n?t.__proto__=r:e(t,r),t}}({},!1):void 0),check:wt}.set,_t=Math.max,kt=Math.min,Et=N("keys"),jt=function(t){return Et[t]||(Et[t]=S(t))},It=(vt=!1,function(t,n,e){var r,i=mt(t),o=L(i.length),u=function(t,n){return(t=P(t))<0?_t(t+n,0):kt(t,n)}(e,o);if(vt&&n!=n){for(;o>u;)if((r=i[u++])!=r)return!0}else for(;o>u;u++)if((vt||u in i)&&i[u]===n)return vt||u||0;return!vt&&-1}),Mt=jt("IE_PROTO"),Pt=function(t,n){var e,r=mt(t),i=0,o=[];for(e in r)e!=Mt&&b(r,e)&&o.push(e);for(;n.length>i;)b(r,e=n[i++])&&(~It(o,e)||o.push(e));return o},Tt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Lt=Tt.concat("length","prototype"),Rt={f:Object.getOwnPropertyNames||function(t){return Pt(t,Lt)}},At=W("species"),Ct=p.f,Ft=Rt.f,Nt=u.RegExp,Wt=Nt,$t=Nt.prototype,Dt=/a/g,Gt=/a/g,Bt=new Nt(Dt)!==Dt;if(e&&(!Bt||n(function(){return Gt[W("match")]=!1,Nt(Dt)!=Dt||Nt(Gt)==Gt||"/a/i"!=Nt(Dt,"i")}))){Nt=function(t,n){var e,i,o,u,c=this instanceof Nt,a=lt(t),s=void 0===n;return!c&&a&&t.constructor===Nt&&s?t:(e=Bt?new Wt(a&&!s?t.source:t,n):Wt((a=t instanceof Nt)?t.source:t,a&&s?g.call(t):n),i=Nt,(u=(c?this:$t).constructor)!==i&&"function"==typeof u&&(o=u.prototype)!==i.prototype&&r(o)&&Ot&&Ot(e,o),e)};for(var Vt=function(t){t in Nt||Ct(Nt,t,{configurable:!0,get:function(){return Wt[t]},set:function(n){Wt[t]=n}})},Ht=Ft(Wt),Ut=0;Ht.length>Ut;)Vt(Ht[Ut++]);$t.constructor=Nt,Nt.prototype=$t,O(u,"RegExp",Nt)}yt=u["RegExp"],e&&yt&&!yt[At]&&p.f(yt,At,{configurable:!0,get:function(){return this}});var zt=new RegExp(/(.+)\[(\d+)\]$/),qt=W("match"),Xt="".startsWith;Q(Q.P+Q.F*function(t){var n=/./;try{"/./"[t](n)}catch(e){try{return n[qt]=!1,!"/./"[t](n)}catch(t){}}return!0}("startsWith"),"String",{startsWith:function(t){var n=function(t,n,e){if(lt(n))throw TypeError("String#"+e+" doesn't accept regex!");return String(E(t))}(this,t,"startsWith"),e=L(Math.min(arguments.length>1?arguments[1]:void 0,n.length)),r=String(t);return Xt?Xt.call(n,r,e):n.slice(e,e+r.length)===r}});var Yt=Math.PI/180,Jt=W("unscopables"),Kt=Array.prototype;null==Kt[Jt]&&y(Kt,Jt,{});var Qt=function(t){Kt[Jt][t]=!0},Zt=function(t,n){return{value:n,done:!!t}},tn={},nn=Object.keys||function(t){return Pt(t,Tt)},en=e?Object.defineProperties:function(t,n){i(t);for(var e,r=nn(n),o=r.length,u=0;o>u;)p.f(t,e=r[u++],n[e]);return t},rn=u.document,on=rn&&rn.documentElement,un=jt("IE_PROTO"),cn=function(){},an=function(){var t,n=s("iframe"),e=Tt.length;for(n.style.display="none",on.appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),an=t.F;e--;)delete an.prototype[Tt[e]];return an()},sn=Object.create||function(t,n){var e;return null!==t?(cn.prototype=i(t),e=new cn,cn.prototype=null,e[un]=t):e=an(),void 0===n?e:en(e,n)},ln=p.f,fn=W("toStringTag"),hn=function(t,n,e){t&&!b(t=e?t:t.prototype,fn)&&ln(t,fn,{configurable:!0,value:n})},pn={};y(pn,W("iterator"),function(){return this});var gn=function(t,n,e){t.prototype=sn(pn,{next:v(1,e)}),hn(t,n+" Iterator")},vn=jt("IE_PROTO"),yn=Object.prototype,dn=Object.getPrototypeOf||function(t){return t=j(t),b(t,vn)?t[vn]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?yn:null},bn=W("iterator"),mn=!([].keys&&"next"in[].keys()),xn=function(){return this},Sn=function(t,n,e,r,i,o,u){gn(e,n,r);var c,a,s,l=function(t){if(!mn&&t in g)return g[t];switch(t){case"keys":case"values":return function(){return new e(this,t)}}return function(){return new e(this,t)}},f=n+" Iterator",h="values"==i,p=!1,g=t.prototype,v=g[bn]||g["@@iterator"]||i&&g[i],d=v||l(i),b=i?h?l("entries"):d:void 0,m="Array"==n&&g.entries||v;if(m&&(s=dn(m.call(new t)))!==Object.prototype&&s.next&&(hn(s,f,!0),"function"!=typeof s[bn]&&y(s,bn,xn)),h&&v&&"values"!==v.name&&(p=!0,d=function(){return v.call(this)}),(mn||p||!g[bn])&&y(g,bn,d),tn[n]=d,tn[f]=xn,i)if(c={values:h?d:l("values"),keys:o?d:l("keys"),entries:b},u)for(a in c)a in g||O(g,a,c[a]);else Q(Q.P+Q.F*(mn||p),n,c);return c}(Array,"Array",function(t,n){this._t=mt(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,Zt(1)):Zt(0,"keys"==n?e:"values"==n?t[e]:[e,t[e]])},"values");tn.Arguments=tn.Array,Qt("keys"),Qt("values"),Qt("entries");for(var wn=W("iterator"),On=W("toStringTag"),_n=tn.Array,kn={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},En=nn(kn),jn=0;jn<En.length;jn++){var In,Mn=En[jn],Pn=kn[Mn],Tn=u[Mn],Ln=Tn&&Tn.prototype;if(Ln&&(Ln[wn]||y(Ln,wn,_n),Ln[On]||y(Ln,On,Mn),tn[Mn]=_n,Pn))for(In in Sn)Ln[In]||O(Ln,In,Sn[In],!0)}function Rn(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function An(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Cn(t,n,e){return n&&An(t.prototype,n),e&&An(t,e),t}var Fn=function(){function t(n,e,r,i){Rn(this,t),this.left=n,this.top=e,this.width=r,this.height=i}return Cn(t,[{key:"clone",value:function(){return new t(this.left,this.top,this.width,this.height)}},{key:"isInside",value:function(t,n){return this.left<=t&&t<this.right&&this.top<=n&&n<this.bottom}},{key:"isIntersecting",value:function(t){return!(t.right<=this.left||t.left>=this.right||t.bottom<=this.top||t.top>=this.bottom)}},{key:"isNorthWest",value:function(t,n){return(this.right<=t||this.left<t)&&(this.top<n||this.bottom<=n)}},{key:"isNorthEast",value:function(t,n){return(this.right>t||this.left>=t)&&(this.top<n||this.bottom<=n)}},{key:"isSouthEast",value:function(t,n){return(this.right>t||this.left>=t)&&(this.top>=n||this.bottom>n)}},{key:"isSouthWest",value:function(t,n){return(this.right<=t||this.left<t)&&(this.top>=n||this.bottom>n)}},{key:"right",get:function(){return this.left+this.width}},{key:"bottom",get:function(){return this.top+this.height}},{key:"centerX",get:function(){return this.left+this.width/2}},{key:"centerY",get:function(){return this.top+this.height/2}}]),t}(),Nn=function(){function t(n,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Rn(this,t),this.type=n,this._data=e,this.id=r&&r.id?String(r.id):at(),this.serial=r&&"number"==typeof r.serial?r.serial:1,this.hints=r}return Cn(t,[{key:"touch",value:function(){this.serial++}},{key:"isSynced",value:function(t){var n=this.serial;return n>0&&n===t.serial}},{key:"needSync",value:function(t){return!this.isSynced(t)}},{key:"sync",value:function(t,n){this.needSync(t)&&(n(this.data),this.serial=t.serial)}},{key:"hasHint",value:function(t,n){return 1===arguments.length?Boolean(this.hints&&t in this.hints):Boolean(this.hints&&t in this.hints&&this.hints[t]===n)}},{key:"hint",value:function(t){return this.hints&&this.hints[t]}},{key:"data",get:function(){return this._data},set:function(t){t!==this._data&&(this._data=t,this.touch())}}]),t}();t.findNextPowerOf2=function(t){for(var n=1;t>n;)n<<=1;return n},t.generateUuid=at,t.get=function t(n,e){if(null!=n){if(e in n)return n[e];var r=e.split(/[.]/),i=function(t,n){var e=zt.exec(n);if(e){var r=t[e[1]];return null!=r?r[parseInt(e[2],10)]:void 0}return t[n]}(n,r.shift());return null!=i&&r.length?t(i,r.join(".")):i}},t.hexCol2rgb=function(t){var n=t.startsWith("#")?1:0;return[parseInt(t.substring(n,n+2),16),parseInt(t.substring(n+2,n+4),16),parseInt(t.substring(n+4,n+6),16)]},t.hexCol2rgba=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255,e=t.startsWith("#")?1:0;return[parseInt(t.substring(e,e+2),16),parseInt(t.substring(e+2,e+4),16),parseInt(t.substring(e+4,e+6),16),n]},t.isPowerOf2=function(t){return 0!==t&&0==(t&t-1)},t.makeCircleCoords=function(t){for(var n=.5*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),e=360/t,r=[],i=0,o=0;i<t;i++)r.push([n*Math.sin(o*Yt),n*Math.cos(o*Yt)]),o+=e;return r},t.maxOf=function(t,n){return t>n?t:n},t.pick=function(t){return function(n){var e={};return n&&t.forEach(function(t){var r=n[t];void 0!==r&&(e[t]=r)}),e}},t.readOption=function(t,n,e,r){if(t){var i=t[n];if(void 0!==i)return i}return"function"==typeof e?e(r):e},t.sample=function(t){return t[Math.random()*t.length|0]},t.toFloatColors=function(t){return t.map(function(t){return t/255})},t.DataRef=Nn,t.AABB2=Fn,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=spearwolf.js.map
